{"version":3,"file":"menu.stories-fcfee819.js","sources":["../../src/components/Menu/menuItem.tsx","../../src/components/Menu/subMenu.tsx","../../src/components/Menu/menu.tsx"],"sourcesContent":["import React, { useContext } from 'react'\n\nimport classNames from 'classnames'\n\nimport { MenuCtx } from './menu'\n\nexport interface MenuItemProps {\n  children?: React.ReactNode\n  index?: string\n  disabled?: boolean\n  className?: string\n  style?: React.CSSProperties\n}\n\nconst MenuItem: React.FC<MenuItemProps> = (props) => {\n  const {\n    children,\n    index,\n    disabled,\n    className,\n    style,\n  } = props\n\n  const ctx = useContext(MenuCtx)\n\n  const classes = classNames('menu-item', className, {\n    'is-disabled': disabled,\n    'is-active': index === ctx.index,\n  })\n\n  const handleClick = () => {\n    if (ctx.onSelect && !disabled) {\n      ctx.onSelect(index!)\n    }\n  }\n\n  return (\n    <li className={classes} style={style} onClick={handleClick} role=\"presentation\">\n      {children}\n    </li>\n  )\n}\n\nexport default MenuItem\n","import type { FunctionComponentElement } from 'react'\nimport React, { useContext, useState } from 'react'\n\nimport classNames from 'classnames'\n\nimport { MenuCtx } from './menu'\nimport MenuItem from './menuItem'\n\nimport type { MenuItemProps } from './menuItem'\n\nimport { Icon } from '../Icon/icon'\nimport Transition from '../Transition/transition'\n\nexport interface SubMenuProps {\n  index?: string\n  title: string\n  className?: string\n  children?: React.ReactNode\n}\n\nconst SubMenu: React.FC<SubMenuProps> = (props) => {\n  const ctx = useContext(MenuCtx)\n  const { defaultOpenSubMenu, mode } = ctx\n  const isVerticalMode = mode === 'vertical'\n  const defaultMenuOpen = defaultOpenSubMenu === undefined ? false : defaultOpenSubMenu\n  const [menuOpened, setMenuOpened] = useState(isVerticalMode ? defaultMenuOpen : false)\n\n  const classes = classNames('menu-item submenu-item', props.className, {\n    'is-active': ctx.index === props.index,\n    'is-opened': menuOpened,\n    'is-vertical': isVerticalMode,\n  })\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault()\n    setMenuOpened(!menuOpened)\n  }\n\n  let timer: any\n  const handleMouse = (e: React.MouseEvent, toggle: boolean) => {\n    clearTimeout(timer)\n    e.preventDefault()\n    timer = setTimeout(() => {\n      setMenuOpened(toggle)\n    }, 300)\n  }\n\n  const clickEvents = isVerticalMode ? {\n    onClick: handleClick,\n  } : {}\n\n  const hoverEvents = !isVerticalMode ? {\n    onMouseEnter: (e: React.MouseEvent) => { handleMouse(e, true) },\n    onMouseLeave: (e: React.MouseEvent) => { handleMouse(e, false) },\n  } : {}\n\n  const renderChildren = () => {\n    const subMenuClasses = classNames('submenu', {\n      'menu-opened': menuOpened,\n    })\n    const childrenComponent = React.Children.map(props.children, (child, i) => {\n      const childEl = child as FunctionComponentElement<MenuItemProps>\n      if (childEl.type !== MenuItem) {\n        throw new Error('Error: SubMenu has at least one child which is not a MenuItem component')\n      }\n      return React.cloneElement(childEl, {\n        index: `${props.index}-${i}`,\n      })\n    })\n\n    return (\n      <Transition\n        in={menuOpened}\n        timeout={300}\n        animation=\"zoom-in-top\"\n      >\n        <ul className={subMenuClasses}>\n          {childrenComponent}\n        </ul>\n      </Transition>\n    )\n  }\n\n  return (\n    <li key={props.index} className={classes} {...hoverEvents}>\n      <div className=\"submenu-title\" {...clickEvents} role=\"presentation\">\n        {props.title}\n        <Icon icon=\"arrow-down\" theme=\"dark\" className=\"arrow-icon\" size=\"xs\" />\n      </div>\n      {renderChildren()}\n    </li>\n  )\n}\n\nexport default SubMenu\n","import React, { createContext, useMemo, useState } from 'react'\n\nimport classNames from 'classnames'\n\nimport MenuItem from './menuItem'\nimport SubMenu from './subMenu'\n\nimport type { MenuItemProps } from './menuItem'\n\ntype MenuMode = 'horizontal' | 'vertical'\ntype SelectCallback = (selectedIndex: string) => void\n\nexport type MenuComponent = React.FC<MenuProps> & {\n  Item: typeof MenuItem\n  SubMenu: typeof SubMenu\n}\n\nexport interface MenuProps {\n  children?: React.ReactNode\n  defaultIndex?: string\n  className?: string\n  mode?: MenuMode\n  style?: React.CSSProperties\n  defaultOpenSubMenu?: boolean\n  onSelect?: (selectedIndex: string) => void\n}\n\ninterface IMenuContext {\n  index: string\n  onSelect?: SelectCallback\n  mode?: MenuMode\n  defaultOpenSubMenu?: boolean\n}\n\nexport const MenuCtx = createContext<IMenuContext>({ index: '0' })\n\nexport const Menu: MenuComponent = (props) => {\n  const {\n    className,\n    defaultIndex,\n    mode,\n    style,\n    onSelect,\n    children,\n    defaultOpenSubMenu,\n  } = props\n\n  const [currentActive, setActive] = useState(defaultIndex)\n\n  const classes = classNames('menu', className, {\n    'menu-vertical': mode === 'vertical',\n    'menu-horizontal': mode !== 'vertical',\n  })\n\n  const handleClick = (index: string) => {\n    setActive(index)\n    if (onSelect) {\n      onSelect(index)\n    }\n  }\n\n  const passedContext: IMenuContext = useMemo(() => ({\n    index: currentActive || '0',\n    onSelect: handleClick,\n    mode,\n    defaultOpenSubMenu,\n  }), [currentActive])\n\n  const renderChildren = () => React.Children.map(children, (child, ii: number) => {\n    const childEl = child as React.FunctionComponentElement<MenuItemProps>\n    const { props: childProps, type } = childEl\n    if (type === MenuItem || type === SubMenu) {\n      return React.cloneElement(childEl, { index: childProps.index || String(ii) })\n    }\n    throw new Error('Error: Menu has at least one child which is not a MenuItem or SubMenu')\n  })\n\n  return (\n    <ul className={classes} style={style} data-testid=\"test-menu\">\n      <MenuCtx.Provider value={passedContext}>\n        {renderChildren()}\n      </MenuCtx.Provider>\n    </ul>\n  )\n}\n\nMenu.defaultProps = {\n  defaultIndex: '0',\n  mode: 'horizontal',\n}\n\nMenu.Item = MenuItem\nMenu.SubMenu = SubMenu\n\nexport default Menu\n"],"names":["MenuItem","props","children","index","disabled","className","style","ctx","useContext","MenuCtx","classes","classNames","jsx","SubMenu","defaultOpenSubMenu","mode","isVerticalMode","defaultMenuOpen","menuOpened","setMenuOpened","useState","handleClick","e","timer","handleMouse","toggle","clickEvents","hoverEvents","renderChildren","subMenuClasses","childrenComponent","React","child","i","childEl","Transition","jsxs","Icon","createContext","Menu","defaultIndex","onSelect","currentActive","setActive","passedContext","useMemo","ii","childProps","type"],"mappings":"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"}